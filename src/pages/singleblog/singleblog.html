<!--
  Generated template for the Blogs page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="primary">
    <ion-buttons left>
      <button ion-button icon-only menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>
    <ion-buttons left>
      <button ion-button icon-only (click)="dashboardPage()">
        <ion-icon name="home"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title text-center text-capitalize>{{singleBlogInfo?.details?.title}}</ion-title>    
  </ion-navbar>
</ion-header>

<ion-content padding class="content-intop">
<ion-card>
<ion-row>
<ion-col width-20>
<ion-avatar item-left text-wrap>
      <img src="{{imageUrl+singleBlogInfo?.details?.avatar}}" [hidden]="!singleBlogInfo?.details?.avatar">
    </ion-avatar>
	</ion-col>
	<ion-col width-80 class="blogs-tittle">
  <ion-item text-wrap>
    <h2>{{singleBlogInfo?.details?.title}}</h2>
    <p class="timedate"><i class="fa fa-user" aria-hidden="true"></i> {{singleBlogInfo?.details?.author_name }} | <i class="fa fa-calendar" aria-hidden="true"></i>  {{singleBlogInfo?.details?.created_at | date :"MMM dd y"}}</p>
  </ion-item></ion-col></ion-row>

  <img src="{{imageUrl+singleBlogInfo?.details?.banner_image}}" [hidden]="!singleBlogInfo?.details?.banner_image">
  <ion-card-content style="padding:10px !important; font-size:17px !important;">
    <p [innerHTML]="singleBlogInfo?.details?.description" style="font-size:17px;"></p>
  </ion-card-content>
 <ion-row (click)="leaveComment()">
    <ion-col>
      <button ion-button icon-left clear small>
        <ion-icon name="text"></ion-icon>
        <div> Comment</div>
      </button>
    </ion-col>
  </ion-row>

<ion-list [hidden]="showComment">  
<div id="commentsView">
   <form [formGroup]="commentForm">
  <ion-item style="padding-left:0px;">
    <ion-textarea placeholder="Comment" formControlName="comment"></ion-textarea>
  </ion-item>
  <p *ngIf="!commentForm.controls.comment.valid && (commentForm.controls.comment.dirty || submitAttempt)" class="err-reds">Please enter the comment</p>
  </form>
  <ion-item class="commend-btns">
  <button ion-button (click)="blogComment(singleBlogInfo?.details?.id)" class="commend-btn">Submit</button>
  </ion-item>
  </div>
  <hr/>
  <ion-item *ngFor="let viewComments of viewCommentsList; let i=index">
  <ion-row>
<ion-col width-20>
    <ion-avatar item-left>
      <img (click)="CommunityUserWall(viewComments?.user_id)" src="{{imageUrl+viewComments?.avatar}}"  
      [hidden]="!viewComments?.avatar">
    </ion-avatar>
	</ion-col>
	<ion-col width-80 class="blogs-tittle">
 <ion-item text-wrap style="padding-left:0px;">
    <h2 (click)="CommunityUserWall(viewComments?.user_id)">{{viewComments?.user_name}}</h2>

	 
    <p class="timedate">{{viewComments?.created_at | date :"MMM dd y h:mm a"}}</p>
    <p item-text-wrap class="page-down">{{viewComments?.comment}}</p>
   
    	<button ion-button icon-right clear end small item-right *ngIf="user_id==viewComments?.user_id" 
     (click)="openMenu(viewComments?.id)">
        <i class="fa fa-angle-down"></i>      
      </button>
     
	  	 </ion-item>
<button style="padding:0px;" class="replys" ion-button *ngIf="user_id != viewComments?.user_id" (click)="viewReply(i)" clear>
     <i class="fa fa-reply" aria-hidden="true"></i>&nbsp;Reply
     </button>
	  </ion-col>
	  </ion-row>
     
     <div *ngIf="i==showReply">
     <ion-row>
        <ion-item>
        <ion-textarea [(ngModel)]="reply_comment" style="margin:0px !important;" placeholder="write a reply.."></ion-textarea>
        </ion-item>
        <button ion-button icon-only (click)="postReply(viewComments.id,viewComments?.user_id)" round><i class="fa fa-paper-plane-o" aria-hidden="true"></i>
        </button>
      </ion-row>
      </div>
       <ion-list *ngFor="let reply of viewComments.comment_reply; let j=index">
        <ion-row>
          <ion-col offset-10>
            <ion-item class="blog-reply">
              <ion-avatar item-left>
                <img (click)="CommunityUserWall(reply?.uid_from)" src="{{imageUrl+reply?.profile_image}}" [hidden]="!reply?.profile_image" width="30" height="30"/>
              </ion-avatar>
              <h5 (click)="CommunityUserWall(reply?.uid_from)">{{reply.name_from}}-{{reply.name_to}}</h5>
              <p item-text-wrap>{{reply.comments_replay}}</p>
              <button ion-button icon-right clear end small item-right *ngIf="user_id==reply?.uid_to" 
              (click)="openMenu(reply?.comments_replay_id)">
                <i class="fa fa-angle-down"></i>    
              </button>
            </ion-item>
            <button ion-button *ngIf="user_id != reply?.uid_from" (click)="replyblogPost(j)" clear><i class="fa fa-reply" aria-hidden="true"></i></button>
              <div *ngIf="j==replyPost">
                <ion-row>
                  <ion-item>
                      <ion-textarea [(ngModel)]="reply_comment" style="margin:0px !important;" placeholder="write a reply.."></ion-textarea>
                  </ion-item>
                  <button ion-button icon-only (click)="postReply(viewComments.id,user_id)" round>
                  <i class="fa fa-paper-plane-o" aria-hidden="true"></i>
                  </button>
                </ion-row>
              </div>
            </ion-col>
          </ion-row>
      </ion-list>
     
     
      </ion-item>
  
</ion-list>
</ion-card>

</ion-content>
<style>
.list-md .item-input:last-child{ border-bottom:0px !important;}
.err-reds {
    color: red !important;
}
</style>

<ion-header>
  <ion-toolbar>
    <ion-title text-center>
      Comments
    </ion-title>
    <ion-buttons start>
      <button ion-button  color="dark" clear (click)="dismiss()">
       <i class="fa fa-times-circle"  name="close"></i>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content>
			
	<ion-list *ngFor="let comment of post_comments; let j=index" class="comm-posted">
     	<ion-item>
		   	<ion-avatar item-left>
  				<img (click)="profileImage(comment.uid)" 
			    		[src]="imageUrl+comment?.profile_image"  
			    		[hidden]="!comment?.profile_image" >
		    </ion-avatar>
	    	<h2 class="cmmpost" (click)="profileImage(comment.uid)">{{comment.name_from}}</h2>
			<p class="time-datem">{{comment.created_at}}</p>
		</ion-item>
		<button ion-button clear *ngIf="comment.likes == 1" (click)="sendInlineLikes(comment.comments_id)"><i class="fa fa-thumbs-up" aria-hidden="true"></i></button>
		<button ion-button clear *ngIf="comment.likes == 0 || comment.likes == null" 
		(click)="sendInlineLikes(comment.comments_id)">Like</button>
		
	  	<ion-item>
	    	<p item-text-wrap [innerHTML]="comment.comments | emojis"></p>
	   	</ion-item>
	 		<button *ngIf="comment.comment_reply.length == 0 && comment.uid_from == user_id" ion-button (click)="showConfirm(comment.comments_id)" color="dark" clear><i class="fa fa-times-circle" aria-hidden="true">
	 		</i></button>
  			<button  ion-button clear (click)="reply(j)"><i class="fa fa-reply" aria-hidden="true"></i></button>
			<button *ngIf="comment.comment_reply[0] != null" ion-button item-right clear 
			(click)="showComments(j)">view replies</button>
		<div *ngIf="j==showReply">
			<ion-list *ngFor="let reply of comment.comment_reply; let i=index">
				<ion-col offset-10>
					<ion-item>
						<ion-avatar item-left>
							<img (click)="myImage(reply.uid)" [src]="imageUrl+reply?.profile_image"  
							[hidden]="!reply?.profile_image">
						</ion-avatar>
						<h2 class="cmmpost">{{reply.name_from}}-{{reply.name_to}}</h2>
					  	<p class="tim e-datem">{{reply.created_at}}</p>
					</ion-item>
				   	<button ion-button clear (click)="sendInlineLikes(comment.comments_id)"><i class="fa fa-thumbs-up" aria-hidden="true"></i></button>
				      	<p item-text-wrap [innerHTML]="reply.comments_replay | emojis"></p>	
						<button ion-button *ngIf="reply.uid_from == user_id" (click)="showConfirm(reply.comments_replay_id)" color="dark" clear><i class="fa fa-times-circle" aria-hidden="true"></i></button>
						<button  ion-button clear (click)="replyComments(i)">
						<i class="fa fa-reply" aria-hidden="true"></i></button>
				</ion-col>
		      	<div *ngIf="i==replyBlock">
					<ion-row>
						<ion-textarea [(ngModel)]="reply_comment" style="margin:0px !important; -webkit-user-select:all !important;" placeholder="write a reply.."></ion-textarea>
						<p class="message-container" [innerHTML]="':smile:  ' | emojis"  
						(click)="emojiPicker2(reply.uid_to,reply.com_post_cmt_id)"></p>
					</ion-row>
					<div class="send-req">
						<button (click)="sendReply(reply.uid_to,reply.com_post_cmt_id)" ion-button class="secon-sdms" color="secondary" round><i class="fa fa-paper-plane-o" aria-hidden="true"></i> </button>
					</div>
			   	</div><hr>
			</ion-list>
		</div>
		<div *ngIf="j==Reply">
			<ion-row>
				<ion-textarea [(ngModel)]="reply_comment" style=" margin:0px !important;-webkit-user-select:all !important;" placeholder="write a reply.."></ion-textarea>
				<p class="message-container" [innerHTML]="':smile:' | emojis"  (click)="emojiPicker2(comment.uid_from,comment.comments_id)"></p>
			</ion-row>
			<div class="send-req">
				<button (click)="sendReply(comment.uid_from,comment.comments_id)" ion-button class="secon-sdms" color="secondary" round><i class="fa fa-paper-plane-o" aria-hidden="true">
				</i></button>
			</div>
		</div>
	</ion-list>
		<ion-row>
			<ion-textarea [(ngModel)]="post_comment" style=" margin:0px !important;-webkit-user-select:all !important;" placeholder="Enter Comments"></ion-textarea>             
			<p class="message-container" [innerHTML]="':smile:' | emojis"  (click)="emojiPicker1(post_id)"></p>		
        </ion-row>
		<div class="send-req">
			<button ion-button (click)="sendComment(post_id,'post')" class="secon-sdms" color="secondary" round><i class="fa fa-paper-plane-o" aria-hidden="true"></i> </button>
		</div>
</ion-content>

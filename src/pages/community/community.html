<ion-header>
  <ion-navbar color="primary">
    <ion-buttons left>
      <button ion-button icon-only menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>
    <ion-buttons left>
	    <button ion-button icon-only (click)="dashboardPage()">
	        <ion-icon name="home"></ion-icon>
	    </button>
    </ion-buttons>
   
    <ion-title text-center text-capitalize>{{communityDetailData?.community_name}}</ion-title>
  </ion-navbar>
</ion-header>
  
<ion-content style="background:#F3F7FF;">
	<div class="one-half-responsive" style="background:#fff;">
	   <p class="image-column-left">
			<img [src]="imageUrl+communityDetailData?.logo"  
				[hidden]="!communityDetailData?.logo">
            <strong class="wel-comemem">Welcome to {{communityDetailData?.community_name}}
            </strong>
			<em  style="" *ngIf(!show_description)>{{communityDetailData?.description | words : 50 : '...'}}</em>
        </p>
		<div class="decoration hide-if-responsive"></div>
	</div>
  	<div  *ngIf="userType == 'sponsor'" class="memberareas">
	  	<ion-item>
			<ion-row *ngIf="!communityDetailData?.isJoined">
		    	<ion-col>
		    		<div>
						<button ion-button  style=" float:right;"(click)="joinCommunity(communityDetailData?.id)" class="post">Join</button>
					</div>
				</ion-col>
			</ion-row>
			<ion-item class="mem-title">
      			<p> &nbsp;Members ({{show_member}})</p>
			</ion-item>
			<ion-slides slidesPerView= "4">
				<div *ngFor="let member of members; let i=index" text-wrap>
					<ion-slide [hidden]="!member?.avatar">
						<ion-item [hidden]="!member?.avatar">
							<ion-col [hidden]="!member?.avatar">
								<img (click)="membersProfile(member.uid)" 
								[src]="imageUrl+member?.avatar" style="width: 70px; height: 70px;"  />
								<small class="mem-name">{{member.name | words :5 : '....'}}
								</small>
							</ion-col>
						</ion-item>
					</ion-slide>
				</div>
				</ion-slides>
				<!-- <div  *ngIf(viewMore) style="float:left;">
					<ion-badge (click)="showModel(members)" class="show-members">+{{show_member}} 
					</ion-badge>
				</div> -->
				<ion-item  *ngIf="!show_member">
					<p style=" color:red; font-size:15px; font-weight:400;">No Members Joined Yet</p>
				</ion-item>
		</ion-item>
	</div>
	<div *ngIf="communityDetailData?.isJoined" class="mem-name-update">
		<h2 class="wel-comemem">Update Status</h2>
			<div style="padding:0px !important;">
				<ion-textarea style="-webkit-user-select:all !important;" [(ngModel)]="post" type="text" placeholder="Whats in your mind?">
				</ion-textarea>
			</div>
			<div style="padding:0px !important;">
		    	<ion-row>
					<ion-col>
						<button ion-button (click)="accessGallery()" icon-only class="video">
							<i class="fa fa-picture-o" aria-hidden="true"></i>&nbsp;
						</button>
						<img [src]="base64Image" *ngIf="base64Image" />
							<button ion-button (click)="addVideos()" icon-only medium class="video">
							<i class="fa fa-video-camera" aria-hidden="true"></i>&nbsp;
						</button>
							<button ion-button icon-only medium (click)="postCommunity(communityDetailData?.id)" class="postedimgvideos">
								<i class="fa fa-paper-plane-o" aria-hidden="true"></i>&nbsp; Post
							</button>
					</ion-col>
				</ion-row> 
				<div *ngIf(addVideo) class="post-urls">
					<form [formGroup]="authForm">
						<ion-row>
							<ion-col>
								<ion-item>
									<ion-input type="url" placeholder="Enter Video Url..."  formControlName="videoUrl"
		            					[class.invalid]="!authForm.controls.videoUrl.valid && (authForm.controls.videoUrl.dirty )">
									</ion-input>
								</ion-item>
									<small style=" float:left;">( Youtube,Dailymotion,Vimeo,Wine)
									</small>
								
							</ion-col>
						</ion-row>
						<div *ngIf="!authForm.controls.videoUrl.valid  && (authForm.controls.videoUrl.dirty || submitAttempt)">
	                	<p style="color:red; font-size: 14px;" class="valid">Please enter valid video url</p>
           				</div>
					</form>
				</div>
		   	</div>
	</div>
	
	<ion-list *ngFor="let user of users; let i=index">	
		<ion-card class="listed-comments">
 			<ion-item>
	      		<ion-row>
	      			<ion-col width-20>
	        			<ion-avatar item-left class="image-profile">
	          				<img [src]="imageUrl+user?.avatar" [hidden]="!user?.avatar" 
	          				(click)="communityProfiles(user.uid)"/>
	        			</ion-avatar>
	        		</ion-col>
	        		<ion-col width-60>
			          	<h2 (click)="communityProfile(user.uid)">{{user.name}}</h2>
			          		<em class="time-datem"><i class="fa fa-clock-o"></i>
			          		{{user.created_at | amDateFormat: 'YYYY-MM-DD HH:mm' | amTimeAgo}}
			          		</em>
			        </ion-col>
					<ion-col width-20>
						<button *ngIf="user.uid == user_id" ion-button color="dark" clear 
						(click)="openMenu(user.id)">
		          			<i class="fa fa-angle-down"></i>
		          		</button>
	          		</ion-col>
				</ion-row>
	    	</ion-item>
			<div>
	      		<ion-card-content [hidden]="!user?.post_message">
		          	<p item-text-wrap class="feed-post" [innerHTML]="user.post_message">
		          	<a href=""></a>{{user.post_message}}</p>
		        </ion-card-content><br>
		        <ion-card-content [hidden]="!user?.post_image">
		          	<img  [src]="imageUrl+user?.post_image">
	       		</ion-card-content>
				<ion-card-content class="video-updates" [hidden]="!user?.post_video">
					<iframe [src]="cleanURL(user?.post_video)" frameborder="0">
	         		</iframe>
	         	</ion-card-content>
	         	<ion-card-content [hidden]="!user?.metalink_image">
		          	<img  [src]="user.metalink_image" (click)="openUrl(user.metalink_url)" 
		          	[hidden]="!user?.metalink_image">
	       		</ion-card-content>
	       		<ion-card-content class="video-updates" [hidden]="!user?.metalink_title">
					<p (click)="openUrl(user.metalink_url)">{{user.metalink_title}}</p>
	         	</ion-card-content>
	         	<ion-card-content class="video-updates" [hidden]="!user?.metalink_description">
					<p (click)="openUrl(user.metalink_url)">{{user.metalink_description}}</p>
	         	</ion-card-content>
			</div>
			     	<div class="comment-liks">

	      		<ion-row>
	        	    <ion-col text-left width-33 style="padding:0px !important;">
				    <button ion-button clear small *ngIf=(user.likes.emoji)
						[innerHTML]="user.likes.emoji | emojis" 
						(click)="emojiPicker($event,user.id)">
					</button>
				      <button *ngIf=(!(user.likes.emoji)) ion-button  clear small (click)="emojiPicker($event,user.id)">

						<p class="liks-comments"><i class="fa fa-thumbs-o-up" aria-hidden="true"></i>&nbsp;{{user.likecount}}&nbsp;Like</p>
						</button>
				    </ion-col>
				    <ion-col text-left width-33 text-left style="padding:0px !important;">
				      <button ion-button icon-left clear small (click)="showComment(user)">
  						<p class="liks-comments"><i class="fa fa-comment-o" aria-hidden="true"></i>&nbsp;{{user.comment_count}}&nbsp;Comment</p>
				      </button>
				    </ion-col>
				    <ion-col>
					    <button ion-button icon-left clear small  
					    *ngIf="!user.likecount == 0">
	  					<p class="liks-comments">&nbsp;{{user.likecount}}+like it</p></button>
				    </ion-col>
				</ion-row>
			</div>
		</ion-card>    		
	</ion-list>

 	<ion-infinite-scroll (ionInfinite)="doInfinite($event)">
    	<ion-infinite-scroll-content></ion-infinite-scroll-content>
  	</ion-infinite-scroll>	      					
</ion-content>


<style>
.text-input-ios{}

ion-col{padding:0px 5px 5px 5px !important;}
 .popover {
    background-color: rgba(0,0,0,0.85);
    border-radius: 5px;
    bottom: 42px;
    box-shadow: 0 0 5px rgba(0,0,0,0.4);
    color: #fff;
    display: none;
    font-size: 12px;
    font-family: 'Helvetica',sans-serif;
    left: -95px;
    padding: 7px 10px;
    position: absolute;
    width: 200px;
    z-index: 4;
    
    &:before {
        border-top: 7px solid rgba(0,0,0,0.85);
        border-right: 7px solid transparent;
        border-left: 7px solid transparent;
        bottom: -7px;
        content: '';
        display: block;
        left: 50%;
        margin-left: -7px;
        position: absolute;
      }
  }
  
  &:hover {
      .popover {
        display: block;
        -webkit-animation: fade-in .3s linear 1, move-up .3s linear 1;
        -moz-animation: fade-in .3s linear 1, move-up .3s linear 1;
        -ms-animation: fade-in .3s linear 1, move-up .3s linear 1;
      }
    }


</style>
	
<ion-header>
  <ion-navbar color="primary">
    <ion-buttons left>
      <button ion-button icon-only menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>
    <ion-buttons left>
    <button ion-button icon-only (click)="dashboardPage()">
        <ion-icon name="home"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title text-capitalize>{{communityProfileData?.name}} Wall</ion-title>
  </ion-navbar>
</ion-header>

<ion-content class="content-intop">
  
	  <div class="cont-conn">
		  <ion-row>
			  <ion-col width-20 style="margin-top:5px; margin-left:5px;">
					<ion-avatar (click)="profileSetting(communityProfileData?.id)" item-left class="image-profile" width-30>
					  	<img [src]="imageUrl+communityProfileData?.avatar" 
					  	[hidden]="!communityProfileData?.avatar" />
					  </ion-avatar>	
			  </ion-col>
			
			  <ion-col text-capitalize class="name-conne">
				  <p *ngIf="communityProfileData?.id != my_id" style="text-align:left;">{{communityProfileData?.name}}</p>
				  <p *ngIf="communityProfileData?.id == my_id" style="text-align:left;">You
				  </p>
			  </ion-col>
		  </ion-row>
			  
			    <ion-row>
			 	  <ion-col class="mess-accept">
					  <p *ngIf="(status === 3 && (communityProfileData?.id != my_id))"><button ion-button (click)="connectMember(communityProfileData)"><i class="fa fa-plug" aria-hidden="true"></i>
					  </button></p>
					  <p *ngIf ="status === 0 && (communityProfileData?.id != my_id)"><button ion-button disabled="true"><i class="fa fa-paper-plane-o"></i></button></p>
					  <p *ngIf="status === 2 && (communityProfileData?.id != my_id)"><button ion-button disabled="true"><i class="fa fa-paper-plane-o"></i></button></p>
					  <p *ngIf="status === 1 && (communityProfileData?.id != my_id)"><button ion-button disabled="true"><i class="fa fa-share-alt"></i></button></p>
					  <p *ngIf="status === 1 && (communityProfileData?.id != my_id)"><button ion-button (click)="messageModel(communityProfileData)"><i class="fa fa-commenting-o"></i>
					  </button></p>
				  </ion-col> 
				
			</ion-row>
		


		    <hr/>
		  
		<ion-segment [(ngModel)]="community" class="segment-top">
	        <ion-segment-button (click)="Activity(communityProfileData?.id)" value="activity">
	          Activity
	        </ion-segment-button>
	        <ion-segment-button (click)="Communities(communityProfileData?.id)" value="communities">
	          Communities
	        </ion-segment-button>
	        <ion-segment-button *ngIf="connection == 'true'" (click)="Connections(communityProfileData?.id,'')" value="connections">
	          Connections
	        </ion-segment-button>
	    </ion-segment>
  
		
		</div>
		
		
		<div [ngSwitch]="community">
       		
		    <ion-list *ngSwitchCase="'activity'">
			
		    	<div  *ngIf="status === 1" class="updated-staus-btn">
				  		<h2 class="wel-comemem">Update Status</h2>
			  		<div style="padding:0px; margin-top:0px;">
			<ion-textarea [(ngModel)]="post" type="text" placeholder="Whats in your mind?" style="margin:0px; -webkit-user-select:all !important;">
           </ion-textarea>
				    		</div>
		    		
						
						
						
						
						<div style="padding:0px !important;" class="mem-name-update">
		    	<ion-row>
					<ion-col>
<button ion-button icon-only class="video-c" (click)="accessGallery()"><i class="fa fa-picture-o"></i>&nbsp;</button><img [src]="base64Image" *ngIf="base64Image" />
<button ion-button (click)="addVideos()" icon-only medium class="video-c"><i class="fa fa-video-camera"></i>&nbsp;</button>
<button ion-button medium icon-only (click)="addUserPosts (communityProfileData?.id)" class="postedimgvideos"><i class="fa fa-paper-plane"></i>&nbsp;</button>
					</ion-col>
				</ion-row> 
				<div *ngIf(addVideo) class="post-urls">
							<form [formGroup]="authForm">
								<ion-row>
									<ion-col>
										<ion-item>
											<ion-input type="url" placeholder="Enter Video Url..."  formControlName="videoUrl"
		            						[class.invalid]="!authForm.controls.videoUrl.valid && (authForm.controls.videoUrl.dirty )">
											</ion-input>	
										</ion-item>
											<small style=" float:left;">( Youtube,Dailymotion,Vimeo,Wine)
									</small>
									</ion-col>
									</ion-row>
							<div *ngIf="!authForm.controls.videoUrl.valid  && (authForm.controls.videoUrl.dirty || submitAttempt)">
	                				<p style="color:red;font-size: 14px;" class="valid">Please enter valid video url</p>
           							</div>
							</form>
							</div>
		   	</div>
				</div>
	 		<ion-list *ngFor="let community of communityProfile; let i=index">

 			<ion-card class="listed-comments">
 				<ion-item text-wrap>
	      			<ion-row>
	      				<ion-col width-20>
	        				<ion-avatar item-left class="image-profile">
		          				<img [src]="imageUrl+community?.community_logo" 
		          					[hidden]="!community?.community_logo"
		          					(click)="goBackToCommunity(community.com_id)">
		        			</ion-avatar>
	        			</ion-col><br>
	        			<ion-col width-60>
		        			<ion-card-content>
			          			<h2 text-wrap (click)="goBackToCommunity(community.com_id)">{{community.community_name}}</h2>
			          			<p class="time-datem"><i class="fa fa-clock-o"></i>
			          		{{community.created_at | amDateFormat: 'YYYY-MM-DD HH:mm' | amTimeAgo}}
			          		</p>
			          		</ion-card-content>
						</ion-col>
						<ion-col width-20>
			  				<button *ngIf="community?.uid == my_id" ion-button color="dark" clear (click)="openMenu(community.id)">
		          			<i class="fa fa-angle-down"></i>
		          		</button>
	          			</ion-col>
	       			</ion-row>
	    		</ion-item>

	       	 		<div>
						<ion-card-content>
			          			<p item-text-wrap class="feed-post" 
			          			[innerHTML]="community.post_message">
			          			<a href=""></a>{{community.post_message}}</p>
						</ion-card-content>
						<ion-card-content [hidden]="!community?.post_image">
							<img  [src]="imageUrl+community?.post_image">
						</ion-card-content>
		       			<ion-card-content [hidden]="!community?.post_video" class="video-updates">
							<iframe [src]="cleanURL(community?.post_video)" frameborder="0">
			         		</iframe>
		       			</ion-card-content>
		       			<ion-card-content [hidden]="!community?.metalink_image">
		          			<img  [src]="community.metalink_image" (click)="openUrl(community.metalink_url)" 
		          			[hidden]="!community?.metalink_image">
	       				</ion-card-content>
	       				<ion-card-content class="video-updates" [hidden]="!community?.metalink_title">
							<p (click)="openUrl(community.metalink_url)">{{community.metalink_title}}
							</p>
	         			</ion-card-content>
	         			<ion-card-content class="video-updates" 
	         				[hidden]="!community?.metalink_description">
							<p (click)="openUrl(community.metalink_url)">{{community.metalink_description}}</p>
	         			</ion-card-content>
	       	 		</div>
	       	 		<div class="comment-liks">
	      				<ion-row>
		        			<ion-col style="padding:0px !important;">
			          			<button ion-button clear *ngIf=(community.likes.emoji)
			          			[innerHTML]="community.likes.emoji | emojis" (click)="emojiPicker($event,community.id)"></button>
			          			<button *ngIf=(!(community.likes.emoji)) ion-button  clear small (click)="emojiPicker($event,community.id)">
								<p class="liks-comments"><i class="fa fa-thumbs-o-up" aria-hidden="true"></i>&nbsp; {{community.likecount}}&nbsp;Likes</p>
								</button>
		        			</ion-col>
		        	
		        			<ion-col style="padding:0px !important;">
			          			<button ion-button color="dark" clear 
			          			(click)="showComment(community)">
			          				<p class="liks-comments"><i class="fa fa-comment-o" aria-hidden="true"></i>&nbsp;{{community.comment_count}}&nbsp;Comments</p>
			          			</button>
		          			</ion-col>
		          		<ion-col>
				    	<button ion-button icon-left clear small  
				    	*ngIf="!community.likecount == 0">
  							<p class="liks-comments">&nbsp;{{community.likecount}}+like it</p>
				      	</button>
				    </ion-col>
	      				</ion-row>
					</div>
	      		</ion-card>
	      	</ion-list>
				<ion-infinite-scroll (ionInfinite)="doInfinite($event)">
   					<ion-infinite-scroll-content></ion-infinite-scroll-content>
  				</ion-infinite-scroll>
		</ion-list>
		
		<ion-list *ngSwitchCase="'communities'">
		<div class="community-div">
			<ion-card *ngFor="let community of getCommunityMembers" class="community-layout">
				<div class="community-img">
			 		 <img (click)="goBackToCommunity(community.id)" style="width:100%; height:200px;" 
			 		 [src]="imageUrl+community?.banner" 	 		 
			 		 [hidden]="!community?.banner" />
					<div class="label-opc">
					   <ion-item text-wrap style="text-align:left !important;"  
					   (click)="goBackToCommunity(community.id)" [hidden]="!community.community_name">
					   <p>{{community.community_name}}</p>
					   </ion-item>
				   	</div>
		   		</div>
			</ion-card>
		</div>
				<ion-infinite-scroll (ionInfinite)="doInfinite2($event)">
	   				<ion-infinite-scroll-content></ion-infinite-scroll-content>
	  			</ion-infinite-scroll>
		</ion-list>
	
		<ion-list *ngSwitchCase="'connections'">
		<ion-row>
			  	<ion-col>
				  	<div>
						<ion-searchbar (ionInput)="setItems($event)">
						</ion-searchbar>
					</div>
				</ion-col>
			</ion-row>
		<ion-card *ngFor="let connection of allConnections">
			
			
	   			<ion-row>
		    		<ion-col width-20>
		    			<ion-avatar item-left>
		    				<img src="{{imageUrl+connection?.avatar}}" [hidden]="!connection?.avatar" 
		    				(click)="loadThisPage(connection?.id)">
		    			</ion-avatar>
		    		</ion-col>
	    			<ion-col width-80 class="conn-listed">
	    				<h1 (click)="loadThisPage(connection?.id)">{{connection?.connections?.name}}</h1>
		    				<p class="comp-name"><i class="fa fa-building-o" aria-hidden="true"></i>{{connection?.connections?.company_name}}</p>
		    				<p><i class="fa fa-briefcase" [hidden]="!connection?.connections?.designation"></i> {{connection?.connections?.designation}}</p>
		 					<p><i class="fa fa-phone" [hidden]="!connection?.connections?.mobile"></i>{{connection?.connections?.mobile}}</p>
	    			</ion-col>
	      		</ion-row>    
	  		</ion-card>
		  		<ion-infinite-scroll (ionInfinite)="doInfinite1($event)">
	   				<ion-infinite-scroll-content></ion-infinite-scroll-content>
	  			</ion-infinite-scroll>
		</ion-list>
	</div>
</ion-content>
	
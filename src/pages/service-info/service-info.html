<!--
  Generated template for the ServiceInfo page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="primary">
    <ion-buttons left>
      <button ion-button icon-only menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>
    <ion-buttons left>
      <button ion-button icon-only (click)="dashboardPage()">
        <ion-icon name="home"></ion-icon>
      </button>
    </ion-buttons>
    <ion-title text-center>Service-info</ion-title>    
  </ion-navbar>
</ion-header>

<ion-content padding>
	<ion-slides class="slide_height" #ghbslides [options]="slideOptions" pager autoplay:300>
      <ion-slide *ngFor="let slide of vendorList.banners">
        <img [src]="url+slide?.banner" class="slide-image"/>
      </ion-slide>  
  </ion-slides>
      <h2> Welcome to {{vendorList?.vendorDetails?.name}}</h2>
      <p> {{vendorList?.vendorDetails?.description}} </p>

  <ion-row>
  <ion-icon ios="ios-mail" md="md-mail">  {{vendorList?.vendorDetails?.email}}</ion-icon>
  </ion-row><br>
  <ion-row>
  <!-- <ion-icon ios="ios-call" md="md-call"></ion-icon> -->
  <i class="fa fa-globe" aria-hidden="true"></i> <a href="">  {{vendorList?.vendorDetails?.website}}</a>
  </ion-row>    
  <ion-row>
    <ion-col>
      <button ion-button full (click)="toggleRequestService()">
        <div>Request Services</div>
      </button>
      <form [formGroup]="requestForm" *ngIf(showRequestService)>
        <div padding>
            <ion-item *ngIf="!requestForm.controls.problem.valid  && (requestForm.controls.problem.dirty || submitAttempt)">
                <p style="color: #ea6153;">Please enter problem description minimum of five character</p>
            </ion-item>
          <ion-input formControlName = "problem" type="text" placeholder="Describe The Problem"></ion-input><br>
          
          <ion-item *ngIf="!requestForm.controls.date.valid  && (requestForm.controls.date.touched || submitAttempt)">
                <p style="color: #ea6153;">Please select the date.</p>
            </ion-item>
          <ion-item class = "service_request" >
           <ion-label inline>Date</ion-label>
           <ion-datetime displayFormat="DD/MM/YYYY" pickerFormat="DD MMMM YYYY" formControlName ="date"></ion-datetime>
          </ion-item><br>

          <ion-item *ngIf="!requestForm.controls.time.valid  && (requestForm.controls.time.dirty || submitAttempt)">
                <p style="color: #ea6153;">Please select the time.</p>
            </ion-item>

          <ion-item class = "service_request" >
            <ion-label inline>Time</ion-label>
            <ion-datetime displayFormat="hh:mm A" pickerFormat="hh:mm:A" formControlName ="time"></ion-datetime>
          </ion-item><br>

          <ion-item *ngIf="!requestForm.controls.contact.valid  && (requestForm.controls.contact.dirty || submitAttempt)">
                <p style="color: #ea6153;">Please enter 10 digit mobile number.</p>
            </ion-item>

          <ion-input formControlName ="contact" type="text" placeholder="Contact Number"></ion-input><br>

          <ion-item *ngIf="!requestForm.controls.dependents.valid  && (requestForm.controls.dependents.dirty || submitAttempt)">
                <p style="color: #ea6153;">Please select the Dependent.</p>
            </ion-item>
          <ion-item class="depend" *ngIf = "userType =='sponsor'">
            <ion-label>Select Dependent</ion-label>
              <ion-select formControlName ="dependents">
                <ion-option *ngFor = "let dependent of vendorList.dependentLists" value={{dependent.id}}>{{dependent.name}}
                </ion-option>
              </ion-select>
          </ion-item>
          <ion-row>
          <ion-col><button class="btn-defaults" ion-button item-right small (click)="toggleRequestService()">Cancel</button></ion-col>
          <ion-col offset-33><button class="btn-primarys" ion-button item-right small (click)="sendRequestService()">Submit</button></ion-col>
          </ion-row>
        </div>
      </form>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col>
      <button ion-button item-left full (click)="toggleServiceOffered()">        
        <div>Services Offered</div>
      </button>
        <div *ngIf(showServiceOffered)>
          <ion-card *ngFor = "let service of vendorList.serviceOffered">
            <ion-list *ngFor = "let category_list of service.category_lists">
              <ion-item class="sub" (click)="show_sub_category()">
                <ion-icon ios="ios-arrow-dropright" md="md-arrow-dropright"></ion-icon>
                {{category_list.category}}  
              </ion-item >
              <ion-item *ngIf(sub_category)>
                <ion-card *ngFor= "let subcategory_list of category_list.service_sub_category_lists; let i=index ">
                <ion-list (click)="showService(i)">
                  <ion-icon ios="ios-arrow-dropright" md="md-arrow-dropright"></ion-icon>
                    {{subcategory_list.subcategory}}
                </ion-list>
                    <ion-item *ngIf= "i === show_service">
                      <ion-card *ngFor="let services of subcategory_list.services" >
                      <ion-list>
                        <ion-icon ios="ios-arrow-dropright" md="md-arrow-dropright"></ion-icon>
                          {{services.service}}
                      </ion-list>
                      </ion-card> 
                    </ion-item>
              </ion-card> 
              </ion-item>
              
            </ion-list>
          </ion-card>

        <ion-card *ngIf="!vendorList.serviceOffered">
          <ion-card-content>
            No Records Found..!
          </ion-card-content>
        </ion-card>    
        
        </div>    
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col>

      <button ion-button item-left full (click)="toggleContact()">
        
        <div>Contact Details</div>
      </button>
      <Div *ngIf(showDetails)>
    <p>{{vendorList?.vendorDetails?.address}}</p>
      </Div>
      <Div *ngIf(!vendorList?.vendorDetails?.address)>
    <p>"No Address Deatails To Display"</p>
      </Div>
    </ion-col>
  </ion-row>

	<!-- </ion-card> -->
</ion-content>

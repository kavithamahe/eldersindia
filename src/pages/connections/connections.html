<ion-header>
<ion-navbar color="primary">
    <ion-buttons left>
      <button ion-button icon-only menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>

    <ion-title text-center>Connections</ion-title>
      <ion-buttons right>
    <button ion-button icon-only (click)="dashboardPage()">
        <ion-icon name="home"></ion-icon>
      </button>
    </ion-buttons>
    <ion-buttons end *ngIf="getconnections == 'myConnections'" right>
      <button ion-button icon-only (click)="presentPopover($event)">
        <ion-icon name="more"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>


<ion-content>
<ion-card class="conn-seg">
  <ion-segment [(ngModel)]="getconnections">
    <ion-segment-button value="myConnections" color="orange" (click)="onInit()">
     My Connections 
    </ion-segment-button>
    <ion-segment-button value="addConnections" color="primary" (click)="addConnectionsList()">
      People you may know
    </ion-segment-button>
   </ion-segment>
</ion-card>
    <div [ngSwitch]="getconnections">
      <ion-list *ngSwitchCase="'myConnections'"> 
        <ion-list *ngIf="connectionsaction == 'received'">
        <ion-segment-button class="listed-rec">Received Requests</ion-segment-button>
        <!-- <ion-searchbar *ngIf="receivedRquestInfo.length != 0" (input)="receivedsearch($event)"></ion-searchbar> -->
        <ion-searchbar (input)="receivedsearch($event)"></ion-searchbar>
            <div *ngFor="let request of receivedRquestInfo">
              <!-- <ion-item-sliding class="inbox-sends"> -->
                <ion-item text-wrap class="inbox-sends">

                  <ion-row>
                    <ion-col width-20>
                      <ion-avatar item-left (click)="CommunityUserWall(request?.id)">
                        <img src="{{imageUrl+request?.avatar}}" [hidden]="!request?.avatar">
                      </ion-avatar>
                    </ion-col>
                    <ion-col width-67>
                      <h6 class="name-conne" (click)="CommunityUserWall(request?.id)">{{request?.connections?.name}} {{request?.connections?.last_name}}</h6>
                      <p><i class="fa fa-inbox"> </i> <span>{{request?.connections?.email}}</span></p>
                      <p [hidden]="!request?.connections?.location"><i class="fa fa-map-marker"></i> <span>{{request?.connections?.location}}</span></p>
                    </ion-col>
                  </ion-row>
                    <button ion-button icon-only class="active-btn"(click)="connectionStatus(request?.connection_id,1)"><i class="fa fa-check"></i></button>
                  <button ion-button icon-only class="inactive-btn" (click)="connectionStatus(request?.connection_id,2)"><i class="fa fa-times" aria-hidden="true"></i>
                  </button>
                </ion-item>
                <!-- <ion-item-options side="right"> -->
                <!--   <button ion-button icon-only class="active-btn"(click)="connectionStatus(request?.connection_id,1)"><i class="fa fa-check"></i></button>
                  <button ion-button icon-only class="inactive-btn" (click)="connectionStatus(request?.connection_id,2)"><i class="fa fa-times" aria-hidden="true"></i>
                  </button> -->
                <!-- </ion-item-options> -->
              <!-- </ion-item-sliding> -->
            </div>
            <ion-infinite-scroll (ionInfinite)="doInfinite2($event)">
            <ion-infinite-scroll-content></ion-infinite-scroll-content>
            </ion-infinite-scroll>   
          </ion-list>
          <ion-list *ngIf="connectionsaction == 'sent'">
          <ion-segment-button class="listed-rec">Sent Requests</ion-segment-button>
           <ion-searchbar (input)="sendsearch($event)">
            </ion-searchbar>  
            <div *ngFor="let request of sentRquestInfo">
              <ion-item class="inbox-sends">
                <ion-row>
                  <ion-col width-20>
                    <ion-avatar item-left (click)="CommunityUserWall(request?.id)">
                      <img src="{{imageUrl+request?.avatar}}" 
                      [hidden]="!request?.avatar">
                    </ion-avatar>
                  </ion-col>
                  <ion-col width-67>
                    <h6 class="name-conne" [hidden]="!request?.connections?.name" 
                    (click)="CommunityUserWall(request?.id)">{{request?.connections?.name}} {{request?.connections?.last_name}}
                    </h6>
                    <p [hidden]="!request?.connections?.email"><i class="fa fa-inbox"> </i> <span>{{request?.connections?.email}}</span></p>
                    <p [hidden]="!request?.connections?.location"><i class="fa fa-map-marker"></i><span> {{request?.connections?.location}}</span>   
                    </p>
                  </ion-col>
                   <ion-col width-20 class="connection-btn">
                    <button ion-button (click)="cancelMember(request.connection_id)" small><i class="fa fa-ban" aria-hidden="true"></i></button>
                  </ion-col>
                </ion-row>
              </ion-item>  <hr/>
            </div>
            <ion-infinite-scroll (ionInfinite)="doInfinite4($event)">
            <ion-infinite-scroll-content></ion-infinite-scroll-content>
            </ion-infinite-scroll>   
          </ion-list>

          <ion-list *ngIf="connectionsaction == 'all'">
          <ion-segment-button class="listed-rec">All Connections</ion-segment-button>
            <ion-searchbar (input)="search($event)">
            </ion-searchbar>
            <div *ngFor="let all of allConnectionsInfo; let islast=last;">
              <ion-item class="inbox-sends">
                <ion-row>
                  <ion-col width-20>
                    <ion-avatar item-left>
                      <img src="{{imageUrl+all?.avatar}}" [hidden]="!all?.avatar" 
                      (click)="CommunityUserWall(all?.id)">
                    </ion-avatar>
                  </ion-col>
                <ion-col width-67>
                  <h6 class="name-conne" (click)="CommunityUserWall(all?.id)">{{all?.connections?.name}} {{all?.connections?.last_name}}</h6>
                  <p><i class="fa fa-inbox"> </i> <span>{{all?.connections?.email}}</span></p>
                  <p [hidden]="!all?.connections?.location"><i class="fa fa-map-marker"></i><span> {{all?.connections?.location}}</span></p>
                </ion-col>
              </ion-row> 
            </ion-item>
			
          </div>
          <ion-infinite-scroll (ionInfinite)="doInfinite1($event)">
          <ion-infinite-scroll-content></ion-infinite-scroll-content>
          </ion-infinite-scroll>    
        </ion-list><hr/>

          </ion-list>
        <ion-list *ngSwitchCase="'addConnections'"> 
       <!--    <ion-searchbar *ngIf="addConnectionInfo.length != 0" (input)="search1($event)"></ion-searchbar> -->
           <ion-searchbar (input)="search1($event)"></ion-searchbar>
            <ion-list *ngFor="let request of addConnectionInfo">
              <ion-item class="inbox-sends">
                <ion-row>
                  <ion-col width-20>
                    <ion-avatar item-left (click)="CommunityUserWall(request?.id)">
                    <img src="{{imageUrl+request?.avatar}}" [hidden]="!request?.avatar">
                    </ion-avatar>
                  </ion-col>
                  <ion-col width-60>
                    <h6 class="name-conne" (click)="CommunityUserWall(request?.id)">{{request?.connections?.name}} {{request?.connections?.last_name}}</h6>
                    <p [hidden]="!request?.connections?.location">
                    <i class="fa fa-map-marker"></i> <span>{{request?.connections?.location}}</span> </p>
                  </ion-col>
                  <ion-col width-20 class="connection-btn">
                    <button ion-button (click)="connectMember(request.id,request.connections.name)"  small><i class="fa fa-plus" aria-hidden="true"></i></button>
                  </ion-col>
                </ion-row>
              </ion-item>
            </ion-list><hr/>
              <ion-infinite-scroll (ionInfinite)="doInfinite3($event)">
                <ion-infinite-scroll-content></ion-infinite-scroll-content>
              </ion-infinite-scroll> 
          </ion-list>
    </div>

</ion-content>


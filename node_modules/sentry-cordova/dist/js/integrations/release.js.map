{"version":3,"file":"release.js","sourceRoot":"","sources":["../../../src/js/integrations/release.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,2CAAqD;AACrD,mCAA4C;AAE5C,IAAM,MAAM,GAAQ,sBAAe,EAAE,CAAC;AAEtC,2CAA2C;AAC3C;IAAA;QACE;;WAEG;QACI,SAAI,GAAW,SAAS,CAAC;IA0BlC,CAAC;IAxBC;;OAEG;IACI,yBAAO,GAAd;QAAA,iBAoBC;QAnBC,mBAAa,EAAE,CAAC,iBAAiB,CAAC,UAAO,KAAkB;;;gBACzD,gFAAgF;gBAChF,gFAAgF;gBAChF,IAAI,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC,gBAAgB,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;oBACjE,KAAK,CAAC,OAAO,GAAG,KAAG,KAAK,CAAC,KAAK,CAAC,gBAAkB,CAAC;iBACnD;gBACD,IAAI,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC,aAAa,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;oBAC3D,KAAK,CAAC,IAAI,GAAG,KAAG,KAAK,CAAC,KAAK,CAAC,aAAe,CAAC;iBAC7C;gBACK,OAAO,GAAG,MAAM,CAAC,cAAc,IAAI,MAAM,CAAC,cAAc,CAAC,EAAE,CAAC;gBAClE,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;oBAC7B,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;oBACxB,KAAK,CAAC,KAAK,gBACN,KAAK,CAAC,KAAK,IACd,gBAAgB,EAAE,OAAO,GAC1B,CAAC;iBACH;gBACD,sBAAO,KAAK,EAAC;;aACd,CAAC,CAAC;IACL,CAAC;IACH,cAAC;AAAD,CAAC,AA9BD,IA8BC;AA9BY,0BAAO","sourcesContent":["import { Integration, SentryEvent } from '@sentry/types';\nimport { getGlobalObject } from '@sentry/utils/misc';\nimport { getDefaultHub } from '@sentry/hub';\n\nconst window: any = getGlobalObject();\n\n/** Default Breadcrumbs instrumentations */\nexport class Release implements Integration {\n  /**\n   * @inheritDoc\n   */\n  public name: string = 'Release';\n\n  /**\n   * @inheritDoc\n   */\n  public install(): void {\n    getDefaultHub().addEventProcessor(async (event: SentryEvent) => {\n      // __sentry_release & __sentry_dist will be picked up by our native integration.\n      // It should live in extra, native will pic it up there and set it in the event.\n      if (event.extra && event.extra.__sentry_release && !event.release) {\n        event.release = `${event.extra.__sentry_release}`;\n      }\n      if (event.extra && event.extra.__sentry_dist && !event.dist) {\n        event.dist = `${event.extra.__sentry_dist}`;\n      }\n      const release = window.SENTRY_RELEASE && window.SENTRY_RELEASE.id;\n      if (release && !event.release) {\n        event.release = release;\n        event.extra = {\n          ...event.extra,\n          __sentry_release: release,\n        };\n      }\n      return event;\n    });\n  }\n}\n"]}